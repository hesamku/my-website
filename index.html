<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>HESAM License Manager</title>
<style>
body { font-family: Arial; background:#111; color:#fff; padding:20px; max-width:600px; margin:auto;}
h1 { text-align:center; color:#3e8af2; }
.box { background:#222; padding:20px; border-radius:10px; margin-bottom:20px;}
input { width:100%; padding:10px; margin-top:8px; border-radius:6px; border:none; outline:none;}
button { width:100%; padding:12px; margin-top:10px; background:#3e8af2; border:none; border-radius:6px; color:#fff; font-size:16px; cursor:pointer;}
button:hover { background:#1e5fcc;}
pre { background:#000; padding:10px; border-radius:6px; overflow-x:auto;}
label { color:#bbb; font-size:14px;}
</style>
</head>
<body>

<h1>ğŸ”‘ HESAM License Manager</h1>

<div class="box" id="loginBox">
  <h3>Login</h3>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div class="box" id="mainBox" style="display:none;">
  <h3>ğŸ“Œ Ø³Ø§Ø®Øª/ØªÙ…Ø¯ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³</h3>
  <input id="keyInput" placeholder="Ú©Ù„ÛŒØ¯ Ù„Ø§ÛŒØ³Ù†Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
  <label>ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²:</label>
  <input id="daysInput" type="number" value="30">
  <button onclick="submitLicense()">Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ GitHub</button>

  <pre id="result"></pre>
</div>

<script>
function login(){
    if(document.getElementById("username").value==="1234" &&
       document.getElementById("password").value==="1234"){
        document.getElementById("loginBox").style.display="none";
        document.getElementById("mainBox").style.display="block";
    } else alert("âŒ ÛŒÙˆØ²Ø±Ù†ÛŒÙ… ÛŒØ§ Ù¾Ø³ÙˆØ±Ø¯ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
}

function submitLicense(){
    let key = document.getElementById("keyInput").value.trim();
    if(!key) key = "HESAM-KU-VIP-"+Math.random().toString(36).substring(2,11).toUpperCase();
    let days = parseInt(document.getElementById("daysInput").value) || 30;

    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Action Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
    const payload = { key: key, days: days };

    fetch("https://api.github.com/repos/hesamku/my-website/dispatches", {
        method:"POST",
        headers:{
            "Accept":"application/vnd.github.v3+json",
            "Authorization":"token YOUR_PERSONAL_ACCESS_TOKEN"
        },
        body: JSON.stringify({
            event_type:"update_license",
            client_payload: payload
        })
    })
    .then(res=>res.ok ? showResult("âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯") : showResult("âŒ Ø®Ø·Ø§"))
    .catch(err=>showResult("âŒ Ø®Ø·Ø§: "+err));
}

function showResult(msg){ document.getElementById("result").innerText = msg; }
</script>
</body>
</html>
